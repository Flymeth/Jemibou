<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your settings</title>
    
    <link rel="shortcut icon" href="./assets/logo.png" type="image/x-icon">

    <link rel="stylesheet" href="./css/__style.css">
    <link rel="stylesheet" href="./css/extra/settings.css">

    <meta name="description" content="Get your server's settings here!">

    <meta name="theme-color" content="var(--extra-color)">
    <meta name="og:title" content="Your settings">
    <meta name="og:type" content="website">
    <meta name="og:description" content="Get your server's settings here!">

    <meta name="og:image" content="./assets/logo.png">
    <meta name="og:image:width" content="1024">
    <meta name="og:image:height" content="1024">
    <meta name="og:image:type" content="image/png">
    <meta name="og:image:alt" content="Logo Jemibou">

    <meta name="og:site_name" content="jemibou.tk">
</head>
<body>
    <header class="no-select">
        <div class="top">
            <h1>ðŸ”§ Your settings</h1>
        </div>
        
        <nav>
            <a href="/">Return to home</a>
        </nav>
    </header>

    <div class="hero">
        <h1>Get the settings of your server!</h1>
    
        <form method="GET">
            <div class="inputs">
                <label for="guildid">
                    <input type="number" name="guild" id="guildid" placeholder="Enter your guild id" required>
                </label>
            </div>
            <button type="submit">Show settings</button>
        </form>
    </div>
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 175">
        <path fill="var(--bg-hero)" fill-opacity="1" d="M0,128L48,112C96,96,192,64,288,74.7C384,85,480,139,576,149.3C672,160,768,128,864,112C960,96,1056,96,1152,101.3C1248,107,1344,117,1392,122.7L1440,128L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"></path>
    </svg>

    <main>
        <h2>Default settings</h2>
        <p>This is every settings that you can use for your server (here is the default value, to change them use .settings generate in your server)</p>
        <table>
            <thead>
                <tr>
                    <th>Settings</th>
                    <th>Values</th>
                </tr>
            </thead>
            <tbody>
                
            </tbody>
        </table>
    </main>

    <script>
        const settings = $guildSettings;
        const defaultSettings = $configs.settings.list;
        const tbody = document.querySelector('tbody')
        
        if(settings) {
            document.querySelector('main>h2').innerText = "Your settings"
            document.querySelector('main>p').innerText = "Settings channel ID: " + settings.channelID
        }

        for(let setting in defaultSettings) {
            const obj = defaultSettings[setting]
            if(!obj.modifiable) continue
            let value;
            if(settings) {
                value = settings[setting] || obj.value || "/"
            }else value = obj.value || "/"

            if(typeof value === "object") {
                let newValue = ""
                for(let v of value) {
                    newValue+= v + "\n"
                }
                value = newValue || "/"
            }

            const infos = [
                obj.desc,
                value
            ]

            const tr = document.createElement('tr')
            for(let i of infos) {
                const td = document.createElement('td')
                td.innerText = i.toString()
                tr.appendChild(td)
            }
            tr.children[0].classList.add('notranslate')
            tbody.appendChild(tr)
        }
    </script>
</body>
</html>